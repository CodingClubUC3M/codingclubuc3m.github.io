---
layout: post
title: "How to create your very first post with Rmarkdown and Knitr"
author: hoanguc3m
date: "October 1, 2016"
categories: [Rmarkdown, jekyll, Knitr]
output:
  pdf_document:
    number_sections: true
fontsize: 12pt 
linestretch: 1.5
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
setwd("/home/hoanguc3m/Dropbox/blog")
```

# Introduction
We usually write a lot of codes everyday. However, most of them are commands and not commented properly. As the consequence, it might take a lot of time to understand our own writing when we review them some months later.

Fortunately, Rmarkdown is an useful tool to create a reproducible research. In order to start writing a readable document. First you need to choose from the menu: *File* -> *New File* -> *R markdown*

From the new pop-up, choose the file type you want and click **OK** and you will have a new document that is ready to be modified.
You could click on the *Knit button* in the menu bar to see how thing looks like.


# Some examples

Here I include some examples from ggplot2:

## Iris data
We plot the iris data as follows:

```{r ggplot_lib, echo=FALSE}
#install.packages("ggplot2")
library(ggplot2)
```

```{r ggplot_iris, fig.align='center'}

ggplot(data=iris, aes(x=Sepal.Length, y=Sepal.Width, color=Species)) +
        geom_point(size=3)

```

How about a regression line 

```{r ggplot_reg, fig.align='center'}

reg_sepal <- lm(Sepal.Length ~ Petal.Width, data = iris)
summary(reg_sepal)

ggplot(iris, aes(x = Petal.Width, y = Sepal.Length, color=Species)) + 
  geom_point() +
  stat_smooth(method = "lm", col = "red")
```

# Publish to github respository
Now we want to share our work as a blog post. We need to convert the Rmd file into md file in order for jekyll to understand.
First please add this instruction to the Rmarkdown header

```{r rmd_header, eval=FALSE}
layout: post
```

And also we could create tag to the post as
```{r rmd_tag, eval=FALSE}
categories: [Rmarkdown, jekyll, Knitr]
```

We have something like this
![](/figure/source/2016-10-1-Blogging-with-Rmarkdown-and-knitr/header.png) 

We also need to separate the figure generated by the Rmarkdown, so try this one


```{r knit_exp, eval=FALSE}

KnitPost <- function(input, base.url = "/") {
    require(knitr)
    opts_knit$set(base.url = base.url)
    fig.path <- paste0("figure/source/", sub(".Rmd$", "", basename(input)), "/")
    opts_chunk$set(fig.path = fig.path)
    opts_chunk$set(fig.cap = "center")
    render_jekyll()
    knit(input, envir = parent.frame())
}
# And after that you could use knitr to create your own post
# 

KnitPost("2016-10-1-Blogging-with-Rmarkdown-and-knitr.Rmd")
```

Now you have the md file together with all the images in the img folder. Let's upload to github folder. 
```{r git_commit, eval=FALSE}
git status
git add -A
git commit -m "New post 10/2016"
git push
```