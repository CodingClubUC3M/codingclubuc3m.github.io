---
title: "Rmarkdown"
author: "Hoang Nguyen"
date: "July 17, 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


**Abstract**: `Markdown` is a lightweight markup language. It has a simple text format syntax which can be easily converted to `html`, `pdf`, `doc`. It allows for a universal text format which you can edit using any text editor and to be rendered in different web frameworks. `R Markdown` helps incorporate `R` codes into the `Markdown` file and creates a reproducible research. This document is prepared by [`@CodingClubUC3M`](https://twitter.com/CodingClubUc3m) to introduce fundamental elements of `R Markdown` and serves as a reference template for contributors.

# Introduction

In **RStudio**, go to **File** --> **New file** --> **R Markdown**, we can now start to edit and run R code. In order to compile, click **Knit** and view the compiled file in the new pop-up window.

Here is the sample default file created by `RStudio`.
```
---
title: "Untitled"
author: "Hoang Nguyen"
date: "July 17, 2018"
output: html_document
---

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```

`R Markdown` metadata section provides many options to configure markdown file. `title`, `author`, `date` are your tutorial information. You can pass other options to `Pandoc` so that `RStudio` can convert the  `R Markdown` file to the appropriate format. For example: `output` can be  `html_document`, `pdf_document`, `word_document`, `md_document`, ...

For the [CodingClubUc3m](https://http://codingclubuc3m.github.com) post, we give this meta header as an example,
```
---
title: "An introduction to Tensorflow"
author: Hoang Nguyen
date: 2018-07-03
output:
  html_document:
    mathjax:  default
    number_sections: no
    toc: yes
    toc_float:
      collapsed: no
      smooth_scroll: no
    code_folding: show
---
```
You can configure to suit with your talk, or if you want to make a self-configuration,
please refer to the Section 3 (Pandoc options) of [this reference](https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf)

# `Markdown` language

## Text format

To emphasize a snippet of text with bold font face, we use double asterisks, for example:
```
**Here is an important sentence.**
```
will be rendered to:  
**Here is an important sentence.**

Similarly, we can create italic or strike-through text:
```
We introduce *a new syntax*
*You can~~not~~ combine them*
```
will be rendered to:  
We introduce *a new syntax*  
*You can~~not~~ combine them*

Moreover, you can use the back-tick to create an inline code format, or programming languages such as `R`, `C`, `Matlab`, `Julia`,...
```
We introduce a new `R` package where you can add two big numbers.
```
will be rendered to:  
We introduce a new `R` package where you can add two big numbers.

## Line break

In order to create a line break in `Markdown`, you can choose one of these syntaxes:

1. Add the backslash (`\`) at the end of the line (in the first paragraph).
2. Add an empty line to separate two paragraphs (in the second paragraph).
3. Add two or more spaces at the end of the line (in the third paragraph).

Note that, the single line break (using enter button) in the plain `Markdown` file does not translate into a line break in the compiled output file.
For example:
```
This is the first paragraph.\
This is the second paragraph.

This is the third paragraph.  
This is the fourth paragraph.
```
will be rendered to:

This is the first paragraph.\
This is the second paragraph.

This is the third paragraph.  
This is the fourth paragraph.

## Blockquotes

In `Markdown`, it is easy to quote a sentence or a paragraph using `>` symbol:
```
As Box once said
> "All models are wrong, but some are useful."
```
will be rendered to:  

As Box once said:

> "All models are wrong, but some are useful."

## Header

Like Microsoft office word, we separate the post using six header levels:
```
# Introduction
## Motivation
### Applications
#### More headers
##### More tiny headers
##### Supper tiny headers
```

will be rendered to: 

# Introduction
## Motivation
### Applications
#### More headers
##### More tiny headers
##### Supper tiny headers

## Links and embedded elements

`Markdown` also allows for a convenient syntax for website links and other embedded elements such as photos, video,... Note that, you can also use html tag to embed videos.

### Hyperlink

Web links are automatically rendered, you can paste the website address directly or label it. For example:
```
For more information, please visit http://codingclubuc3m.github.io.  
please visit [Coding club website](https://http://codingclubuc3m.github.io)
```
will be rendered to: 

For more information, please visit http://codingclubuc3m.github.io.  
please visit [Coding club website](https://http://codingclubuc3m.github.io)

### Image and video

For images, you cannot configure image sizes, so it is better to resize it before embedded:
```
![Coding club is awesome](https://github.com/CodingClubUC3M/codingclubuc3m.github.io/raw/master/public/logos/UC3M_logo_cc.png "Put your title here")
```
will be rendered to:  
![Coding club is awesome](https://github.com/CodingClubUC3M/codingclubuc3m.github.io/raw/master/public/logos/UC3M_logo_cc.png "Put your title here")

For videos, you can embed an image which links to the video clip. 
```
[![UC3M](http://img.youtube.com/vi/-qZzK5KhwSs/0.jpg)](http://www.youtube.com/watch?v=-qZzK5KhwSs)
```
will be rendered to:  
[![UC3M](http://img.youtube.com/vi/-qZzK5KhwSs/0.jpg)](http://www.youtube.com/watch?v=-qZzK5KhwSs)

## List

Here are several ways to write ordered lists and unordered lists:
```
1. Use a number to label an ordered list
    a. Or you could use a letter
        - while an unordered list could start with a minus sign (hyphen)
        + an unordered list with a plus sign
        * an unordered list with an asterisks
            * a tab for a lower level
2. The second ordered list label
```
will be rendered to:

1. Use a number to label an ordered list
    a. Or you could use a letter
        - while an unordered list could start with a minus sign (hyphen)
        + an unordered list with a plus sign
        * an unordered list with an asterisks
            * a tab for a lower level
2. The second ordered list label
    
## Math expressions

The syntax of math expressions in `Markdown` is similar to that of $\LaTeX$,
for example:
```
$$
X = \begin{bmatrix}1 & x_{1}\\
1 & x_{2}\\
1 & x_{3}
\end{bmatrix}
$$
```
would become

$$X = \begin{bmatrix}1 & x_{1}\\
1 & x_{2}\\
1 & x_{3}
\end{bmatrix}$$

You can also use inline math mode as $\LaTeX$ syntax. For example, `$1+1 = 2$` will be rendered to $1+1 = 2$

## Inline HTML

In case that you are familiar with html tag, you can write down the html code in the `Markdown` file.
For example,
```
 <table style="width:100%">
  <tr>
    <th>First Header</th>
    <th>Second Header</th>
  </tr>
  <tr>
    <td>Content from cell 1</td>
    <td>Content from cell 2</td>
  </tr>
  <tr>
    <td>Content in the first column</td>
    <td>Content in the second column</td>
  </tr>
</table> 
```

will be rendered to: 

First Header | Second Header
------------ | -------------
Content from cell 1 | Content from cell 2
Content in the first column | Content in the second column

# R codes with chunk options 

In order to insert R codes into the markdown file, you can click the `Insert` button,
then choose the first option `R`, for example

```{r}
cat("Here is the first chunk code in R Markdown")
```

As you compile using `Knit` button, `RStudio` will run the R code chunk and write down the results to the output file. The options for the output settings are written as ````{r, chunk_label_name, echo=TRUE, eval=TRUE, warning=TRUE}`. Here, you can choose:

- To include the chunk code to the output file (`echo` option), 
- To evaluate the chunk (`eval` option), 
- To include the warning when running the chunk code (`warning` option). 
- To display any error messages (`error` option)
- To display any messages (`message` option)

The name option is optional but it is recommended to name the chunk properly. This makes the `R Markdown` document become flexible and suit with different purposes. You can find more advanced options at https://bookdown.org/yihui/rmarkdown/r-code.html

You can also create a cache for the results using `cache = TRUE`. This is very useful for a chunk that requires heavy computation. The next time you compile the `R Markdown` file, it will run faster. 

We also have another set of useful options for plotting in `R Markdown` such as ````{r, fig.height = 4, fig.width = 6, fig.align='center', fig.cap='Here is our example'}` where we center the figure, and set `height = 4` and `width =6`.

```{r, fig.height = 4, fig.width = 6, fig.align='center', fig.cap='Here is our example'}
jet.colors <- colorRampPalette(c("#00007F", "blue", "#007FFF", "cyan",
                                 "#7FFF7F", "yellow", "#FF7F00", "red", 
                                 "#7F0000"))
# Plot for palettes
testPalette <- function(col, n = 200, ...) {
  image(1:n, 1, as.matrix(1:n), col = get(col)(n = n, ...), 
        main = col, xlab = "", ylab = "", axes = FALSE)
}

# Color palettes comparison
par(mfrow = c(2, 3))
res <- sapply(c("rainbow", "topo.colors", "terrain.colors", 
                "heat.colors", "cm.colors", "jet.colors"), testPalette)
```


Here is another example, we export the table data using `kable` function

```{r, iris, echo = TRUE, message = FALSE, fig.asp = 1}
data("iris")
knitr::kable(iris[1:5, ], caption = 'Iris data')
```

## Examples

Some blog post examples that contributors had written for Coding Club Uc3m:

a. [Useful one-function R packages, big data solutions, and a message from Yoda](https://raw.githubusercontent.com/CodingClubUC3M/codingclubuc3m.github.io/master/rmd/2018-05-10-misc-R-function.Rmd)
b. [An introduction to Shiny as a teaching resource](https://raw.githubusercontent.com/CodingClubUC3M/codingclubuc3m.github.io/master/rmd/2018-06-19-introduction-Shiny.Rmd)

## Reference

1. [Markdown cheatsheet](https://guides.github.com/pdfs/markdown-cheatsheet-online.pdf)
2. [R Markdown syntax](https://bookdown.org/yihui/bookdown/markdown-syntax.html)
3. [R Markdown reference](https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf)

## Credits

The document is proposed by [Hoang Nguyen](https://hoanguc3m.github.io) and [Eduardo García-Portugués](https://egarpor.github.io). The material in this document is licensed under [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/).





